#:kivy 2.3.1

<ListScreen>
    md_bg_color: self.theme_cls.backgroundColor

    MDBoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(20)

        MDBoxLayout:
            orientation: 'horizontal'
            adaptive_height: True
            spacing: dp(10)
            padding: dp(20), 0, 0, 0

            AreaSelector:
                id: area_selector
                adaptive_width: True
                size_hint_y: None
                pos_hint: {"center_y": 0.5}

            MDTextField:
                id: search_field
                mode: 'filled'
                on_text: root.refresh_data()
                MDTextFieldLeadingIcon:
                    icon: "magnify"
                MDTextFieldHintText:
                    text: "Climb Name"

        MDDivider:
            size_hint_x: .9
            pos_hint: {'center_x': .5}
        CustomMDSegmentedButton:
            type: 'medium'
            MDSegmentedButtonItem:
                id: sort_by_date
                on_release: root.load_by_date()
                active: True
                MDSegmentButtonLabel:
                    text: 'by Date'
            MDSegmentedButtonItem:
                id: sort_by_grade
                on_release: root.load_by_grade()

                MDSegmentButtonLabel:
                    text: 'by Grade'

        MDRecycleView:
            viewclass: 'AscentItem'
            id: ascent_list
            scroll_type: ['bars', 'content']
            scroll_wheel_distance: dp(60)
            bar_width: dp(3)
            
            RecycleBoxLayout:
                orientation: 'vertical'
                default_size: None, dp(30)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height


<AscentItem>
    orientation: 'horizontal'
    adaptive_height: True
    spacing: dp(10)

    canvas.after:
        Color:
            rgba: 0.5, 0.5, 0.5, 1  # Light gray color for the line
        Line:
            points: self.x, self.y, self.right, self.y  # Draws a line at the bottom
            width: 1  # Thickness of the line

    MDLabel:
        text: root.date
        adaptive_width: True
        text_color: app.theme_cls.secondaryColor
        italic: True
        font_style: 'Body'
        role: 'small'
    
    ClickableMDLabel:
        text: root.name
        bold: True
        font_style: 'Title' if root.is_group else 'Body'
        role: 'medium' if root.is_group else 'medium'
        shorten: True
        shorten_from: 'right'
        on_release: root.show_info_bubble()
    
    MDLabel:
        text: root.grade
        adaptive_width: True
        text_color: self.theme_cls.primaryColor
        font_style: 'Body'
        role: 'medium'

    MDIconButton:
        icon: 'delete-outline'
        theme_font_size: "Custom"
        font_size: "20sp"
        radius: [self.height / 4, ]
        size_hint: None, None
        size: "30dp", "30dp"
        on_release: root.show_delete_dialog()
        opacity: 0 if root.is_group else 1
        disabled: root.is_group

<DialogItem>
    orientation: 'horizontal'
    adaptive_height: True
    spacing: dp(20)

    MDIcon:
        icon: root.icon
        adaptive_width: True

    MDLabel:
        text: root.label
        adaptive_height: True